<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="ThemeBucket">
    <link rel="shortcut icon" href="#" type="image/png">

    <title>Login</title>

    <link href="static/style.css" rel="stylesheet">
    <link href="static/style-responsive.css" rel="stylesheet">

    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script src="static/jsencrypt.js"></script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
<!--    <script src="js/html5shiv.js"></script>-->
<!--    <script src="js/respond.min.js"></script>-->
    <![endif]-->
</head>

<body class="login-body">

<div class="container">

    <form class="form-signin"  method="post" th:action="@{/login}">
        <div class="form-signin-heading text-center">
            <h1 class="sign-title">Sign In</h1>
<!--            <img src="/static/login-logo.png" alt=""/>-->
<!--            <img src="/static/login-logo.png" alt=""/>-->
<!--            <img th:src="@{'/static/login-logo.png'}" class="img-responsive center-block" alt="">-->
            <h3 style="color: #000;" >请输入账号密码</h3>
        </div>
        <div class="login-wrap">
            <label style="color: red" th:text="${msg}"></label>
            <input type="text" name="userName" class="form-control" placeholder="userName" autofocus id="username">
            <input type="password" name="password" class="form-control" placeholder="password" id="password">
            <button class="btn btn-lg btn-login btn-block" type="submit" onclick="secretLogin()">登录
<!--                <i class="fa fa-check"></i>-->
            </button>

<!--            <input class="btn btn-lg btn-login btn-block" type="button" onclick="secretLogin()" th:value="登录">-->







            <div class="registration">
                Not a member yet?
                <a class="" href="/register">
                    注册
                </a>
            </div>


        </div>


    </form>

</div>



<!-- Placed js at the end of the document so the pages load faster -->

<!-- Placed js at the end of the document so the pages load faster -->
<script src="static/jquery.min.js"></script>
<script src="static/bootstrap.min.js"></script>
<!--<script src="js/modernizr.min.js"></script>-->


<!--<form>-->
<!--    用户账号：-->
<!--    <input type="text" name="username" id="username">-->
<!--    <br>-->
<!--    用户密码：-->
<!--    <input type="text" name="password" id="password">-->
<!--    <br>-->
<!--    <input type="button" onclick="logi()" th:value="提交">-->
<!--</form>-->

<script>
    function secretLogin() {
        alert("test")
        // var username = $('#username').val();
        // var passwordVal = $('#password').val();
        // let uname = document.getElementById('username')
        let pwd = document.getElementById('password')

        var encrypt = new JSEncrypt();

        $.get("/getPublicKey",function(data,status){
                    encrypt.setPublicKey(data)

                    // console.log("encryptPwd:"+encryptPwd)
            // $.post("/login",{"username":username,"password":encryptPwd});
        });



        pwd.value = encrypt.encrypt(pwd.value)

        // $.ajax({
        //     type: "get",  //提交方式
        //     url: "/getPublicKey",//访问路径
        //     contentType: 'application/json;charset=utf-8',//返回json结果
        //     success: function (data) {
        //         console.log(data)
        //         encrypt.setPublicKey(data)
        //         var encryptPwd = encrypt.encrypt(password)
        //         console.log("encryptPwd:"+encryptPwd)




                // $.ajax({
                //     type: "post",  //提交方式
                //     url: "/login",//访问路径
                //     contentType: 'application/json;charset=utf-8',//返回json结果
                //     data: JSON.stringify({"username":username,"password":encryptPwd}),
                //     success: function (data) {
                //         console.log(data)
                //
                //     }
                // });

        //
        //     }
        // });

    }
</script>



</body>
</html>
